var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,c;function a(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function l(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function h(e){return e&&o(e.destroy)?e.destroy:t}function u(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function x(){return g("")}function y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function v(t){c=t}function w(t){(function(){if(!c)throw new Error("Function called outside component initialization");return c})().$$.after_update.push(t)}const A=[],_=[],O=[],j=[],S=Promise.resolve();let P=!1;function C(t){O.push(t)}const T=new Set;let E=0;function L(){const t=c;do{for(;E<A.length;){const t=A[E];E++,v(t),D(t.$$)}for(v(null),A.length=0,E=0;_.length;)_.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];T.has(e)||(T.add(e),e())}O.length=0}while(A.length);for(;j.length;)j.pop()();P=!1,T.clear(),v(t)}function D(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const z=new Set;let I;function W(){I={r:0,c:[],p:I}}function N(){I.r||s(I.c),I=I.p}function R(t,e){t&&t.i&&(z.delete(t),t.i(e))}function Y(t,e,n,s){if(t&&t.o){if(z.has(t))return;z.add(t),I.c.push((()=>{z.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const X="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function F(t,e){Y(t,1,1,(()=>{e.delete(t.key)}))}function q(t){t&&t.c()}function G(t,n,r,i){const{fragment:c,on_mount:a,on_destroy:l,after_update:h}=t.$$;c&&c.m(n,r),i||C((()=>{const n=a.map(e).filter(o);l?l.push(...n):s(n),t.$$.on_mount=[]})),h.forEach(C)}function B(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(A.push(t),P||(P=!0,S.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,o,r,i,a,l,h,u=[-1]){const f=c;v(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};h&&h(d.root);let b=!1;if(d.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),b&&V(e,t)),n})):[],d.update(),b=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&R(e.$$.fragment),G(e,o.target,o.anchor,o.customElement),L()}v(f)}class H{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(t,e,n){if(t&&t.length){const[s,o]=e,r=Math.PI/180*n,i=Math.cos(r),c=Math.sin(r);t.forEach((t=>{const[e,n]=t;t[0]=(e-s)*i-(n-o)*c+s,t[1]=(e-s)*c+(n-o)*i+o}))}}function U(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function J(t,e){const n=e.hachureAngle+90;let s=e.hachureGap;s<0&&(s=4*e.strokeWidth),s=Math.max(s,.1);const o=[0,0];if(n)for(const e of t)Q(e,o,n);const r=function(t,e){const n=[];for(const e of t){const t=[...e];t[0].join(",")!==t[t.length-1].join(",")&&t.push([t[0][0],t[0][1]]),t.length>2&&n.push(t)}const s=[];e=Math.max(e,.1);const o=[];for(const t of n)for(let e=0;e<t.length-1;e++){const n=t[e],s=t[e+1];if(n[1]!==s[1]){const t=Math.min(n[1],s[1]);o.push({ymin:t,ymax:Math.max(n[1],s[1]),x:t===n[1]?n[0]:s[0],islope:(s[0]-n[0])/(s[1]-n[1])})}}if(o.sort(((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax))),!o.length)return s;let r=[],i=o[0].ymin;for(;r.length||o.length;){if(o.length){let t=-1;for(let e=0;e<o.length&&!(o[e].ymin>i);e++)t=e;o.splice(0,t+1).forEach((t=>{r.push({s:i,edge:t})}))}if(r=r.filter((t=>!(t.edge.ymax<=i))),r.sort(((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x))),r.length>1)for(let t=0;t<r.length;t+=2){const e=t+1;if(e>=r.length)break;const n=r[t].edge,o=r[e].edge;s.push([[Math.round(n.x),i],[Math.round(o.x),i]])}i+=e,r.forEach((t=>{t.edge.x=t.edge.x+e*t.edge.islope}))}return s}(t,s);if(n){for(const e of t)Q(e,o,-n);!function(t,e,n){const s=[];t.forEach((t=>s.push(...t))),Q(s,e,n)}(r,o,-n)}return r}class K{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const n=J(t,e);return{type:"fillSketch",ops:this.renderLines(n,e)}}renderLines(t,e){const n=[];for(const s of t)n.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],e));return n}}class tt extends K{fillPolygons(t,e){let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);const s=J(t,Object.assign({},e,{hachureGap:n})),o=Math.PI/180*e.hachureAngle,r=[],i=.5*n*Math.cos(o),c=.5*n*Math.sin(o);for(const[t,e]of s)U([t,e])&&r.push([[t[0]-i,t[1]+c],[...e]],[[t[0]+i,t[1]-c],[...e]]);return{type:"fillSketch",ops:this.renderLines(r,e)}}}class et extends K{fillPolygons(t,e){const n=this._fillPolygons(t,e),s=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),o=this._fillPolygons(t,s);return n.ops=n.ops.concat(o.ops),n}}class nt{constructor(t){this.helper=t}fillPolygons(t,e){const n=J(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(n,e)}dotsOnLines(t,e){const n=[];let s=e.hachureGap;s<0&&(s=4*e.strokeWidth),s=Math.max(s,.1);let o=e.fillWeight;o<0&&(o=e.strokeWidth/2);const r=s/4;for(const i of t){const t=U(i),c=t/s,a=Math.ceil(c)-1,l=t-a*s,h=(i[0][0]+i[1][0])/2-s/4,u=Math.min(i[0][1],i[1][1]);for(let t=0;t<a;t++){const i=u+l+t*s,c=h-r+2*Math.random()*r,a=i-r+2*Math.random()*r,f=this.helper.ellipse(c,a,o,o,e);n.push(...f.ops)}}return{type:"fillSketch",ops:n}}}class st{constructor(t){this.helper=t}fillPolygons(t,e){const n=J(t,e);return{type:"fillSketch",ops:this.dashedLine(n,e)}}dashedLine(t,e){const n=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,s=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,o=[];return t.forEach((t=>{const r=U(t),i=Math.floor(r/(n+s)),c=(r+s-i*(n+s))/2;let a=t[0],l=t[1];a[0]>l[0]&&(a=t[1],l=t[0]);const h=Math.atan((l[1]-a[1])/(l[0]-a[0]));for(let t=0;t<i;t++){const r=t*(n+s),i=r+n,l=[a[0]+r*Math.cos(h)+c*Math.cos(h),a[1]+r*Math.sin(h)+c*Math.sin(h)],u=[a[0]+i*Math.cos(h)+c*Math.cos(h),a[1]+i*Math.sin(h)+c*Math.sin(h)];o.push(...this.helper.doubleLineOps(l[0],l[1],u[0],u[1],e))}})),o}}class ot{constructor(t){this.helper=t}fillPolygons(t,e){const n=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,s=e.zigzagOffset<0?n:e.zigzagOffset,o=J(t,e=Object.assign({},e,{hachureGap:n+s}));return{type:"fillSketch",ops:this.zigzagLines(o,s,e)}}zigzagLines(t,e,n){const s=[];return t.forEach((t=>{const o=U(t),r=Math.round(o/(2*e));let i=t[0],c=t[1];i[0]>c[0]&&(i=t[1],c=t[0]);const a=Math.atan((c[1]-i[1])/(c[0]-i[0]));for(let t=0;t<r;t++){const o=2*t*e,r=2*(t+1)*e,c=Math.sqrt(2*Math.pow(e,2)),l=[i[0]+o*Math.cos(a),i[1]+o*Math.sin(a)],h=[i[0]+r*Math.cos(a),i[1]+r*Math.sin(a)],u=[l[0]+c*Math.cos(a+Math.PI/4),l[1]+c*Math.sin(a+Math.PI/4)];s.push(...this.helper.doubleLineOps(l[0],l[1],u[0],u[1],n),...this.helper.doubleLineOps(u[0],u[1],h[0],h[1],n))}})),s}}const rt={};class it{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ct={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function at(t,e){return t.type===e}function lt(t){const e=[],n=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t);let s="BOD",o=0,r=n[o];for(;!at(r,2);){let i=0;const c=[];if("BOD"===s){if("M"!==r.text&&"m"!==r.text)return lt("M0,0"+t);o++,i=ct[r.text],s=r.text}else at(r,1)?i=ct[s]:(o++,i=ct[r.text],s=r.text);if(!(o+i<n.length))throw new Error("Path data ended short");for(let t=o;t<o+i;t++){const e=n[t];if(!at(e,1))throw new Error("Param not a number: "+s+","+e.text);c[c.length]=+e.text}if("number"!=typeof ct[s])throw new Error("Bad segment: "+s);{const t={key:s,data:c};e.push(t),o+=i,r=n[o],"M"===s&&(s="L"),"m"===s&&(s="l")}}return e}function ht(t){let e=0,n=0,s=0,o=0;const r=[];for(const{key:i,data:c}of t)switch(i){case"M":r.push({key:"M",data:[...c]}),[e,n]=c,[s,o]=c;break;case"m":e+=c[0],n+=c[1],r.push({key:"M",data:[e,n]}),s=e,o=n;break;case"L":r.push({key:"L",data:[...c]}),[e,n]=c;break;case"l":e+=c[0],n+=c[1],r.push({key:"L",data:[e,n]});break;case"C":r.push({key:"C",data:[...c]}),e=c[4],n=c[5];break;case"c":{const t=c.map(((t,s)=>s%2?t+n:t+e));r.push({key:"C",data:t}),e=t[4],n=t[5];break}case"Q":r.push({key:"Q",data:[...c]}),e=c[2],n=c[3];break;case"q":{const t=c.map(((t,s)=>s%2?t+n:t+e));r.push({key:"Q",data:t}),e=t[2],n=t[3];break}case"A":r.push({key:"A",data:[...c]}),e=c[5],n=c[6];break;case"a":e+=c[5],n+=c[6],r.push({key:"A",data:[c[0],c[1],c[2],c[3],c[4],e,n]});break;case"H":r.push({key:"H",data:[...c]}),e=c[0];break;case"h":e+=c[0],r.push({key:"H",data:[e]});break;case"V":r.push({key:"V",data:[...c]}),n=c[0];break;case"v":n+=c[0],r.push({key:"V",data:[n]});break;case"S":r.push({key:"S",data:[...c]}),e=c[2],n=c[3];break;case"s":{const t=c.map(((t,s)=>s%2?t+n:t+e));r.push({key:"S",data:t}),e=t[2],n=t[3];break}case"T":r.push({key:"T",data:[...c]}),e=c[0],n=c[1];break;case"t":e+=c[0],n+=c[1],r.push({key:"T",data:[e,n]});break;case"Z":case"z":r.push({key:"Z",data:[]}),e=s,n=o}return r}function ut(t){const e=[];let n="",s=0,o=0,r=0,i=0,c=0,a=0;for(const{key:l,data:h}of t){switch(l){case"M":e.push({key:"M",data:[...h]}),[s,o]=h,[r,i]=h;break;case"C":e.push({key:"C",data:[...h]}),s=h[4],o=h[5],c=h[2],a=h[3];break;case"L":e.push({key:"L",data:[...h]}),[s,o]=h;break;case"H":s=h[0],e.push({key:"L",data:[s,o]});break;case"V":o=h[0],e.push({key:"L",data:[s,o]});break;case"S":{let t=0,r=0;"C"===n||"S"===n?(t=s+(s-c),r=o+(o-a)):(t=s,r=o),e.push({key:"C",data:[t,r,...h]}),c=h[0],a=h[1],s=h[2],o=h[3];break}case"T":{const[t,r]=h;let i=0,l=0;"Q"===n||"T"===n?(i=s+(s-c),l=o+(o-a)):(i=s,l=o);const u=s+2*(i-s)/3,f=o+2*(l-o)/3,p=t+2*(i-t)/3,d=r+2*(l-r)/3;e.push({key:"C",data:[u,f,p,d,t,r]}),c=i,a=l,s=t,o=r;break}case"Q":{const[t,n,r,i]=h,l=s+2*(t-s)/3,u=o+2*(n-o)/3,f=r+2*(t-r)/3,p=i+2*(n-i)/3;e.push({key:"C",data:[l,u,f,p,r,i]}),c=t,a=n,s=r,o=i;break}case"A":{const t=Math.abs(h[0]),n=Math.abs(h[1]),r=h[2],i=h[3],c=h[4],a=h[5],l=h[6];if(0===t||0===n)e.push({key:"C",data:[s,o,a,l,a,l]}),s=a,o=l;else if(s!==a||o!==l){pt(s,o,a,l,t,n,r,i,c).forEach((function(t){e.push({key:"C",data:t})})),s=a,o=l}break}case"Z":e.push({key:"Z",data:[]}),s=r,o=i}n=l}return e}function ft(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function pt(t,e,n,s,o,r,i,c,a,l){const h=(u=i,Math.PI*u/180);var u;let f=[],p=0,d=0,b=0,g=0;if(l)[p,d,b,g]=l;else{[t,e]=ft(t,e,-h),[n,s]=ft(n,s,-h);const i=(t-n)/2,l=(e-s)/2;let u=i*i/(o*o)+l*l/(r*r);u>1&&(u=Math.sqrt(u),o*=u,r*=u);const f=o*o,m=r*r,x=f*m-f*l*l-m*i*i,y=f*l*l+m*i*i,k=(c===a?-1:1)*Math.sqrt(Math.abs(x/y));b=k*o*l/r+(t+n)/2,g=k*-r*i/o+(e+s)/2,p=Math.asin(parseFloat(((e-g)/r).toFixed(9))),d=Math.asin(parseFloat(((s-g)/r).toFixed(9))),t<b&&(p=Math.PI-p),n<b&&(d=Math.PI-d),p<0&&(p=2*Math.PI+p),d<0&&(d=2*Math.PI+d),a&&p>d&&(p-=2*Math.PI),!a&&d>p&&(d-=2*Math.PI)}let m=d-p;if(Math.abs(m)>120*Math.PI/180){const t=d,e=n,c=s;d=a&&d>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,f=pt(n=b+o*Math.cos(d),s=g+r*Math.sin(d),e,c,o,r,i,0,a,[d,t,b,g])}m=d-p;const x=Math.cos(p),y=Math.sin(p),k=Math.cos(d),M=Math.sin(d),$=Math.tan(m/4),v=4/3*o*$,w=4/3*r*$,A=[t,e],_=[t+v*y,e-w*x],O=[n+v*M,s-w*k],j=[n,s];if(_[0]=2*A[0]-_[0],_[1]=2*A[1]-_[1],l)return[_,O,j].concat(f);{f=[_,O,j].concat(f);const t=[];for(let e=0;e<f.length;e+=3){const n=ft(f[e][0],f[e][1],h),s=ft(f[e+1][0],f[e+1][1],h),o=ft(f[e+2][0],f[e+2][1],h);t.push([n[0],n[1],s[0],s[1],o[0],o[1]])}return t}}const dt={randOffset:function(t,e){return _t(t,e)},randOffsetWithRange:function(t,e,n){return At(t,e,n)},ellipse:function(t,e,n,s,o){const r=yt(n,s,o);return kt(t,e,o,r).opset},doubleLineOps:function(t,e,n,s,o){return Ot(t,e,n,s,o,!0)}};function bt(t,e,n,s,o){return{type:"path",ops:Ot(t,e,n,s,o)}}function gt(t,e,n){const s=(t||[]).length;if(s>2){const o=[];for(let e=0;e<s-1;e++)o.push(...Ot(t[e][0],t[e][1],t[e+1][0],t[e+1][1],n));return e&&o.push(...Ot(t[s-1][0],t[s-1][1],t[0][0],t[0][1],n)),{type:"path",ops:o}}return 2===s?bt(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function mt(t,e,n,s,o){return function(t,e){return gt(t,!0,e)}([[t,e],[t+n,e],[t+n,e+s],[t,e+s]],o)}function xt(t,e){let n=St(t,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){const s=St(t,1.5*(1+.22*e.roughness),function(t){const e=Object.assign({},t);e.randomizer=void 0,t.seed&&(e.seed=t.seed+1);return e}(e));n=n.concat(s)}return{type:"path",ops:n}}function yt(t,e,n){const s=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),o=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*s)),r=2*Math.PI/o;let i=Math.abs(t/2),c=Math.abs(e/2);const a=1-n.curveFitting;return i+=_t(i*a,n),c+=_t(c*a,n),{increment:r,rx:i,ry:c}}function kt(t,e,n,s){const[o,r]=Ct(s.increment,t,e,s.rx,s.ry,1,s.increment*At(.1,At(.4,1,n),n),n);let i=Pt(o,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[o]=Ct(s.increment,t,e,s.rx,s.ry,1.5,0,n),r=Pt(o,null,n);i=i.concat(r)}return{estimatedPoints:r,opset:{type:"path",ops:i}}}function Mt(t,e,n,s,o,r,i,c,a){const l=t,h=e;let u=Math.abs(n/2),f=Math.abs(s/2);u+=_t(.01*u,a),f+=_t(.01*f,a);let p=o,d=r;for(;p<0;)p+=2*Math.PI,d+=2*Math.PI;d-p>2*Math.PI&&(p=0,d=2*Math.PI);const b=2*Math.PI/a.curveStepCount,g=Math.min(b/2,(d-p)/2),m=Tt(g,l,h,u,f,p,d,1,a);if(!a.disableMultiStroke){const t=Tt(g,l,h,u,f,p,d,1.5,a);m.push(...t)}return i&&(c?m.push(...Ot(l,h,l+u*Math.cos(p),h+f*Math.sin(p),a),...Ot(l,h,l+u*Math.cos(d),h+f*Math.sin(d),a)):m.push({op:"lineTo",data:[l,h]},{op:"lineTo",data:[l+u*Math.cos(p),h+f*Math.sin(p)]})),{type:"path",ops:m}}function $t(t,e){const n=[];for(const s of t)if(s.length){const t=e.maxRandomnessOffset||0,o=s.length;if(o>2){n.push({op:"move",data:[s[0][0]+_t(t,e),s[0][1]+_t(t,e)]});for(let r=1;r<o;r++)n.push({op:"lineTo",data:[s[r][0]+_t(t,e),s[r][1]+_t(t,e)]})}}return{type:"fillPath",ops:n}}function vt(t,e){return function(t,e){let n=t.fillStyle||"hachure";if(!rt[n])switch(n){case"zigzag":rt[n]||(rt[n]=new tt(e));break;case"cross-hatch":rt[n]||(rt[n]=new et(e));break;case"dots":rt[n]||(rt[n]=new nt(e));break;case"dashed":rt[n]||(rt[n]=new st(e));break;case"zigzag-line":rt[n]||(rt[n]=new ot(e));break;default:n="hachure",rt[n]||(rt[n]=new K(e))}return rt[n]}(e,dt).fillPolygons(t,e)}function wt(t){return t.randomizer||(t.randomizer=new it(t.seed||0)),t.randomizer.next()}function At(t,e,n,s=1){return n.roughness*s*(wt(n)*(e-t)+t)}function _t(t,e,n=1){return At(-t,t,e,n)}function Ot(t,e,n,s,o,r=!1){const i=r?o.disableMultiStrokeFill:o.disableMultiStroke,c=jt(t,e,n,s,o,!0,!1);if(i)return c;const a=jt(t,e,n,s,o,!0,!0);return c.concat(a)}function jt(t,e,n,s,o,r,i){const c=Math.pow(t-n,2)+Math.pow(e-s,2),a=Math.sqrt(c);let l=1;l=a<200?1:a>500?.4:-.0016668*a+1.233334;let h=o.maxRandomnessOffset||0;h*h*100>c&&(h=a/10);const u=h/2,f=.2+.2*wt(o);let p=o.bowing*o.maxRandomnessOffset*(s-e)/200,d=o.bowing*o.maxRandomnessOffset*(t-n)/200;p=_t(p,o,l),d=_t(d,o,l);const b=[],g=()=>_t(u,o,l),m=()=>_t(h,o,l),x=o.preserveVertices;return r&&(i?b.push({op:"move",data:[t+(x?0:g()),e+(x?0:g())]}):b.push({op:"move",data:[t+(x?0:_t(h,o,l)),e+(x?0:_t(h,o,l))]})),i?b.push({op:"bcurveTo",data:[p+t+(n-t)*f+g(),d+e+(s-e)*f+g(),p+t+2*(n-t)*f+g(),d+e+2*(s-e)*f+g(),n+(x?0:g()),s+(x?0:g())]}):b.push({op:"bcurveTo",data:[p+t+(n-t)*f+m(),d+e+(s-e)*f+m(),p+t+2*(n-t)*f+m(),d+e+2*(s-e)*f+m(),n+(x?0:m()),s+(x?0:m())]}),b}function St(t,e,n){const s=[];s.push([t[0][0]+_t(e,n),t[0][1]+_t(e,n)]),s.push([t[0][0]+_t(e,n),t[0][1]+_t(e,n)]);for(let o=1;o<t.length;o++)s.push([t[o][0]+_t(e,n),t[o][1]+_t(e,n)]),o===t.length-1&&s.push([t[o][0]+_t(e,n),t[o][1]+_t(e,n)]);return Pt(s,null,n)}function Pt(t,e,n){const s=t.length,o=[];if(s>3){const r=[],i=1-n.curveTightness;o.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<s;e++){const n=t[e];r[0]=[n[0],n[1]],r[1]=[n[0]+(i*t[e+1][0]-i*t[e-1][0])/6,n[1]+(i*t[e+1][1]-i*t[e-1][1])/6],r[2]=[t[e+1][0]+(i*t[e][0]-i*t[e+2][0])/6,t[e+1][1]+(i*t[e][1]-i*t[e+2][1])/6],r[3]=[t[e+1][0],t[e+1][1]],o.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}if(e&&2===e.length){const t=n.maxRandomnessOffset;o.push({op:"lineTo",data:[e[0]+_t(t,n),e[1]+_t(t,n)]})}}else 3===s?(o.push({op:"move",data:[t[1][0],t[1][1]]}),o.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===s&&o.push(...Ot(t[0][0],t[0][1],t[1][0],t[1][1],n));return o}function Ct(t,e,n,s,o,r,i,c){const a=[],l=[];if(0===c.roughness){t/=4,l.push([e+s*Math.cos(-t),n+o*Math.sin(-t)]);for(let r=0;r<=2*Math.PI;r+=t){const t=[e+s*Math.cos(r),n+o*Math.sin(r)];a.push(t),l.push(t)}l.push([e+s*Math.cos(0),n+o*Math.sin(0)]),l.push([e+s*Math.cos(t),n+o*Math.sin(t)])}else{const h=_t(.5,c)-Math.PI/2;l.push([_t(r,c)+e+.9*s*Math.cos(h-t),_t(r,c)+n+.9*o*Math.sin(h-t)]);const u=2*Math.PI+h-.01;for(let i=h;i<u;i+=t){const t=[_t(r,c)+e+s*Math.cos(i),_t(r,c)+n+o*Math.sin(i)];a.push(t),l.push(t)}l.push([_t(r,c)+e+s*Math.cos(h+2*Math.PI+.5*i),_t(r,c)+n+o*Math.sin(h+2*Math.PI+.5*i)]),l.push([_t(r,c)+e+.98*s*Math.cos(h+i),_t(r,c)+n+.98*o*Math.sin(h+i)]),l.push([_t(r,c)+e+.9*s*Math.cos(h+.5*i),_t(r,c)+n+.9*o*Math.sin(h+.5*i)])}return[l,a]}function Tt(t,e,n,s,o,r,i,c,a){const l=r+_t(.1,a),h=[];h.push([_t(c,a)+e+.9*s*Math.cos(l-t),_t(c,a)+n+.9*o*Math.sin(l-t)]);for(let r=l;r<=i;r+=t)h.push([_t(c,a)+e+s*Math.cos(r),_t(c,a)+n+o*Math.sin(r)]);return h.push([e+s*Math.cos(i),n+o*Math.sin(i)]),h.push([e+s*Math.cos(i),n+o*Math.sin(i)]),Pt(h,null,a)}function Et(t,e,n,s,o,r,i,c){const a=[],l=[c.maxRandomnessOffset||1,(c.maxRandomnessOffset||1)+.3];let h=[0,0];const u=c.disableMultiStroke?1:2,f=c.preserveVertices;for(let p=0;p<u;p++)0===p?a.push({op:"move",data:[i[0],i[1]]}):a.push({op:"move",data:[i[0]+(f?0:_t(l[0],c)),i[1]+(f?0:_t(l[0],c))]}),h=f?[o,r]:[o+_t(l[p],c),r+_t(l[p],c)],a.push({op:"bcurveTo",data:[t+_t(l[p],c),e+_t(l[p],c),n+_t(l[p],c),s+_t(l[p],c),h[0],h[1]]});return a}function Lt(t){return[...t]}function Dt(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function zt(t,e,n){const s=Dt(e,n);if(0===s)return Dt(t,e);let o=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/s;return o=Math.max(0,Math.min(1,o)),Dt(t,It(e,n,o))}function It(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function Wt(t,e,n,s){const o=s||[];if(function(t,e){const n=t[e+0],s=t[e+1],o=t[e+2],r=t[e+3];let i=3*s[0]-2*n[0]-r[0];i*=i;let c=3*s[1]-2*n[1]-r[1];c*=c;let a=3*o[0]-2*r[0]-n[0];a*=a;let l=3*o[1]-2*r[1]-n[1];return l*=l,i<a&&(i=a),c<l&&(c=l),i+c}(t,e)<n){const n=t[e+0];if(o.length){(r=o[o.length-1],i=n,Math.sqrt(Dt(r,i)))>1&&o.push(n)}else o.push(n);o.push(t[e+3])}else{const s=.5,r=t[e+0],i=t[e+1],c=t[e+2],a=t[e+3],l=It(r,i,s),h=It(i,c,s),u=It(c,a,s),f=It(l,h,s),p=It(h,u,s),d=It(f,p,s);Wt([r,l,f,d],0,n,o),Wt([d,p,u,a],0,n,o)}var r,i;return o}function Nt(t,e){return Rt(t,0,t.length,e)}function Rt(t,e,n,s,o){const r=o||[],i=t[e],c=t[n-1];let a=0,l=1;for(let s=e+1;s<n-1;++s){const e=zt(t[s],i,c);e>a&&(a=e,l=s)}return Math.sqrt(a)>s?(Rt(t,e,l+1,s,r),Rt(t,l,n,s,r)):(r.length||r.push(i),r.push(c)),r}function Yt(t,e=.15,n){const s=[],o=(t.length-1)/3;for(let n=0;n<o;n++){Wt(t,3*n,e,s)}return n&&n>0?Rt(s,0,s.length,n):s}const Xt="none";class Ft{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}}line(t,e,n,s,o){const r=this._o(o);return this._d("line",[bt(t,e,n,s,r)],r)}rectangle(t,e,n,s,o){const r=this._o(o),i=[],c=mt(t,e,n,s,r);if(r.fill){const o=[[t,e],[t+n,e],[t+n,e+s],[t,e+s]];"solid"===r.fillStyle?i.push($t([o],r)):i.push(vt([o],r))}return r.stroke!==Xt&&i.push(c),this._d("rectangle",i,r)}ellipse(t,e,n,s,o){const r=this._o(o),i=[],c=yt(n,s,r),a=kt(t,e,r,c);if(r.fill)if("solid"===r.fillStyle){const n=kt(t,e,r,c).opset;n.type="fillPath",i.push(n)}else i.push(vt([a.estimatedPoints],r));return r.stroke!==Xt&&i.push(a.opset),this._d("ellipse",i,r)}circle(t,e,n,s){const o=this.ellipse(t,e,n,n,s);return o.shape="circle",o}linearPath(t,e){const n=this._o(e);return this._d("linearPath",[gt(t,!1,n)],n)}arc(t,e,n,s,o,r,i=!1,c){const a=this._o(c),l=[],h=Mt(t,e,n,s,o,r,i,!0,a);if(i&&a.fill)if("solid"===a.fillStyle){const i=Object.assign({},a);i.disableMultiStroke=!0;const c=Mt(t,e,n,s,o,r,!0,!1,i);c.type="fillPath",l.push(c)}else l.push(function(t,e,n,s,o,r,i){const c=t,a=e;let l=Math.abs(n/2),h=Math.abs(s/2);l+=_t(.01*l,i),h+=_t(.01*h,i);let u=o,f=r;for(;u<0;)u+=2*Math.PI,f+=2*Math.PI;f-u>2*Math.PI&&(u=0,f=2*Math.PI);const p=(f-u)/i.curveStepCount,d=[];for(let t=u;t<=f;t+=p)d.push([c+l*Math.cos(t),a+h*Math.sin(t)]);return d.push([c+l*Math.cos(f),a+h*Math.sin(f)]),d.push([c,a]),vt([d],i)}(t,e,n,s,o,r,a));return a.stroke!==Xt&&l.push(h),this._d("arc",l,a)}curve(t,e){const n=this._o(e),s=[],o=xt(t,n);if(n.fill&&n.fill!==Xt&&t.length>=3){const e=function(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const s=[];if(3===n)s.push(Lt(t[0]),Lt(t[1]),Lt(t[2]),Lt(t[2]));else{const n=[];n.push(t[0],t[0]);for(let e=1;e<t.length;e++)n.push(t[e]),e===t.length-1&&n.push(t[e]);const o=[],r=1-e;s.push(Lt(n[0]));for(let t=1;t+2<n.length;t++){const e=n[t];o[0]=[e[0],e[1]],o[1]=[e[0]+(r*n[t+1][0]-r*n[t-1][0])/6,e[1]+(r*n[t+1][1]-r*n[t-1][1])/6],o[2]=[n[t+1][0]+(r*n[t][0]-r*n[t+2][0])/6,n[t+1][1]+(r*n[t][1]-r*n[t+2][1])/6],o[3]=[n[t+1][0],n[t+1][1]],s.push(o[1],o[2],o[3])}}return s}(t),o=Yt(e,10,(1+n.roughness)/2);"solid"===n.fillStyle?s.push($t([o],n)):s.push(vt([o],n))}return n.stroke!==Xt&&s.push(o),this._d("curve",s,n)}polygon(t,e){const n=this._o(e),s=[],o=gt(t,!0,n);return n.fill&&("solid"===n.fillStyle?s.push($t([t],n)):s.push(vt([t],n))),n.stroke!==Xt&&s.push(o),this._d("polygon",s,n)}path(t,e){const n=this._o(e),s=[];if(!t)return this._d("path",s,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=n.fill&&"transparent"!==n.fill&&n.fill!==Xt,r=n.stroke!==Xt,i=!!(n.simplification&&n.simplification<1),c=function(t,e,n){const s=ut(ht(lt(t))),o=[];let r=[],i=[0,0],c=[];const a=()=>{c.length>=4&&r.push(...Yt(c,e)),c=[]},l=()=>{a(),r.length&&(o.push(r),r=[])};for(const{key:t,data:e}of s)switch(t){case"M":l(),i=[e[0],e[1]],r.push(i);break;case"L":a(),r.push([e[0],e[1]]);break;case"C":if(!c.length){const t=r.length?r[r.length-1]:i;c.push([t[0],t[1]])}c.push([e[0],e[1]]),c.push([e[2],e[3]]),c.push([e[4],e[5]]);break;case"Z":a(),r.push([i[0],i[1]])}if(l(),!n)return o;const h=[];for(const t of o){const e=Nt(t,n);e.length&&h.push(e)}return h}(t,1,i?4-4*n.simplification:(1+n.roughness)/2);return o&&("solid"===n.fillStyle?s.push($t(c,n)):s.push(vt(c,n))),r&&(i?c.forEach((t=>{s.push(gt(t,!1,n))})):s.push(function(t,e){const n=ut(ht(lt(t))),s=[];let o=[0,0],r=[0,0];for(const{key:t,data:i}of n)switch(t){case"M":{const t=1*(e.maxRandomnessOffset||0),n=e.preserveVertices;s.push({op:"move",data:i.map((s=>s+(n?0:_t(t,e))))}),r=[i[0],i[1]],o=[i[0],i[1]];break}case"L":s.push(...Ot(r[0],r[1],i[0],i[1],e)),r=[i[0],i[1]];break;case"C":{const[t,n,o,c,a,l]=i;s.push(...Et(t,n,o,c,a,l,r,e)),r=[a,l];break}case"Z":s.push(...Ot(r[0],r[1],o[0],o[1],e)),r=[o[0],o[1]]}return{type:"path",ops:s}}(t,n))),this._d("path",s,n)}opsToPath(t,e){let n="";for(const s of t.ops){const t="number"==typeof e&&e>=0?s.data.map((t=>+t.toFixed(e))):s.data;switch(s.op){case"move":n+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":n+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":n+=`L${t[0]} ${t[1]} `}}return n.trim()}toPaths(t){const e=t.sets||[],n=t.options||this.defaultOptions,s=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Xt};break;case"fillPath":e={d:this.opsToPath(t),stroke:Xt,strokeWidth:0,fill:n.fill||Xt};break;case"fillSketch":e=this.fillSketch(t,n)}e&&s.push(e)}return s}fillSketch(t,e){let n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||Xt,strokeWidth:n,fill:Xt}}}class qt{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Ft(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const r of e)switch(r.type){case"path":s.save(),s.strokeStyle="none"===n.stroke?"transparent":n.stroke,s.lineWidth=n.strokeWidth,n.strokeLineDash&&s.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(s.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(s,r,o),s.restore();break;case"fillPath":{s.save(),s.fillStyle=n.fill||"";const e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(s,r,o,e),s.restore();break}case"fillSketch":this.fillSketch(s,r,n)}}fillSketch(t,e,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=s,this._drawToContext(t,e,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,n,s="nonzero"){t.beginPath();for(const s of e.ops){const e="number"==typeof n&&n>=0?s.data.map((t=>+t.toFixed(n))):s.data;switch(s.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,n,s,o){const r=this.gen.line(t,e,n,s,o);return this.draw(r),r}rectangle(t,e,n,s,o){const r=this.gen.rectangle(t,e,n,s,o);return this.draw(r),r}ellipse(t,e,n,s,o){const r=this.gen.ellipse(t,e,n,s,o);return this.draw(r),r}circle(t,e,n,s){const o=this.gen.circle(t,e,n,s);return this.draw(o),o}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n),n}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n),n}arc(t,e,n,s,o,r,i=!1,c){const a=this.gen.arc(t,e,n,s,o,r,i,c);return this.draw(a),a}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n),n}path(t,e){const n=this.gen.path(t,e);return this.draw(n),n}}const Gt="http://www.w3.org/2000/svg";class Bt{constructor(t,e){this.svg=t,this.gen=new Ft(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,o=s.createElementNS(Gt,"g"),r=t.options.fixedDecimalPlaceDigits;for(const i of e){let e=null;switch(i.type){case"path":e=s.createElementNS(Gt,"path"),e.setAttribute("d",this.opsToPath(i,r)),e.setAttribute("stroke",n.stroke),e.setAttribute("stroke-width",n.strokeWidth+""),e.setAttribute("fill","none"),n.strokeLineDash&&e.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":e=s.createElementNS(Gt,"path"),e.setAttribute("d",this.opsToPath(i,r)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",n.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(s,i,n)}e&&o.appendChild(e)}return o}fillSketch(t,e,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=t.createElementNS(Gt,"path");return o.setAttribute("d",this.opsToPath(e,n.fixedDecimalPlaceDigits)),o.setAttribute("stroke",n.fill||""),o.setAttribute("stroke-width",s+""),o.setAttribute("fill","none"),n.fillLineDash&&o.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,n,s,o){const r=this.gen.line(t,e,n,s,o);return this.draw(r)}rectangle(t,e,n,s,o){const r=this.gen.rectangle(t,e,n,s,o);return this.draw(r)}ellipse(t,e,n,s,o){const r=this.gen.ellipse(t,e,n,s,o);return this.draw(r)}circle(t,e,n,s){const o=this.gen.circle(t,e,n,s);return this.draw(o)}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n)}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n)}arc(t,e,n,s,o,r,i=!1,c){const a=this.gen.arc(t,e,n,s,o,r,i,c);return this.draw(a)}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n)}path(t,e){const n=this.gen.path(t,e);return this.draw(n)}}var Vt={canvas:(t,e)=>new qt(t,e),svg:(t,e)=>new Bt(t,e),generator:t=>new Ft(t),newSeed:()=>Ft.newSeed()};let Zt=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let s=63&n[t];e+=s<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s<63?"_":"-"}return e};function Ht(t){let e,n;return{c(){e=d("img"),k(e,"class","icon svelte-1sn7125"),a(e.src,n=t[1])||k(e,"src",n),$(e,"width",t[0])},m(t,n){f(t,e,n)},p(t,s){2&s&&!a(e.src,n=t[1])&&k(e,"src",n),1&s&&$(e,"width",t[0])},d(t){t&&p(e)}}}function Qt(t){let e,n,s;return{c(){e=d("a"),n=d("img"),k(n,"class","icon active svelte-1sn7125"),a(n.src,s=t[1])||k(n,"src",s),$(n,"width",t[0]),k(e,"href",t[3]),k(e,"target","_blank")},m(t,s){f(t,e,s),u(e,n)},p(t,o){2&o&&!a(n.src,s=t[1])&&k(n,"src",s),1&o&&$(n,"width",t[0]),8&o&&k(e,"href",t[3])},d(t){t&&p(e)}}}function Ut(t){let e,n,s,r;return{c(){e=d("img"),k(e,"class","icon active svelte-1sn7125"),a(e.src,n=t[1])||k(e,"src",n),$(e,"width",t[0])},m(n,i){f(n,e,i),s||(r=y(e,"click",(function(){o(t[2])&&t[2].apply(this,arguments)})),s=!0)},p(s,o){t=s,2&o&&!a(e.src,n=t[1])&&k(e,"src",n),1&o&&$(e,"width",t[0])},d(t){t&&p(e),s=!1,r()}}}function Jt(e){let n;function s(t,e){return t[2]?Ut:t[3]?Qt:Ht}let o=s(e),r=o(e);return{c(){r.c(),n=x()},m(t,e){r.m(t,e),f(t,n,e)},p(t,[e]){o===(o=s(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&p(n)}}}function Kt(t,e,n){let{width:s="2em"}=e,{src:o}=e,{clickFn:r}=e,{href:i}=e;return t.$$set=t=>{"width"in t&&n(0,s=t.width),"src"in t&&n(1,o=t.src),"clickFn"in t&&n(2,r=t.clickFn),"href"in t&&n(3,i=t.href)},[s,o,r,i]}class te extends H{constructor(t){super(),Z(this,t,Kt,Jt,r,{width:0,src:1,clickFn:2,href:3})}}function ee(t,e,n){const s=t.slice();return s[11]=e[n],s}function ne(t){let e,n,s,r,i,c,a,l,h,d,m=t[11].name[0]+"",x=t[11].name[1]+"";return{c(){e=b("g"),n=b("path"),r=b("text"),i=g(m),c=g(x),k(n,"d",s=t[11].path),k(r,"x",a=t[7]+(ie+(ce-ie)/2)*t[11].mx),k(r,"y",l=t[7]+(ie+(ce-ie)/2)*t[11].my),k(r,"dy","0.35em"),k(r,"text-anchor","middle"),k(r,"stroke",t[3]),k(e,"class","option svelte-9eu8o1"),$(e,"--color",t[3],!1)},m(s,a){f(s,e,a),u(e,n),u(e,r),u(r,i),u(r,c),h||(d=y(e,"click",(function(){o(t[11].fun)&&t[11].fun.apply(this,arguments)})),h=!0)},p(o,h){t=o,1&h&&s!==(s=t[11].path)&&k(n,"d",s),1&h&&m!==(m=t[11].name[0]+"")&&M(i,m),1&h&&x!==(x=t[11].name[1]+"")&&M(c,x),1&h&&a!==(a=t[7]+(ie+(ce-ie)/2)*t[11].mx)&&k(r,"x",a),1&h&&l!==(l=t[7]+(ie+(ce-ie)/2)*t[11].my)&&k(r,"y",l),8&h&&k(r,"stroke",t[3]),8&h&&$(e,"--color",t[3],!1)},d(t){t&&p(e),h=!1,d()}}}function se(t){let e,n,s,r,i,c,a,l,h;return{c(){e=b("g"),n=b("path"),r=b("image"),k(n,"d",s=t[11].path),k(r,"x",i=t[7]+(ie+(ce-ie)/2)*t[11].mx-10),k(r,"y",c=t[7]+(ie+(ce-ie)/2)*t[11].my-10),k(r,"width","20"),k(r,"height","20"),k(r,"href",a=t[11].icon),k(e,"class","option svelte-9eu8o1"),$(e,"--color",t[3],!1)},m(s,i){f(s,e,i),u(e,n),u(e,r),l||(h=y(e,"click",(function(){o(t[11].fun)&&t[11].fun.apply(this,arguments)})),l=!0)},p(o,l){t=o,1&l&&s!==(s=t[11].path)&&k(n,"d",s),1&l&&i!==(i=t[7]+(ie+(ce-ie)/2)*t[11].mx-10)&&k(r,"x",i),1&l&&c!==(c=t[7]+(ie+(ce-ie)/2)*t[11].my-10)&&k(r,"y",c),1&l&&a!==(a=t[11].icon)&&k(r,"href",a),8&l&&$(e,"--color",t[3],!1)},d(t){t&&p(e),l=!1,h()}}}function oe(t){let e;function n(t,e){return t[11].icon?se:ne}let s=n(t),o=s(t);return{c(){o.c(),e=x()},m(t,n){o.m(t,n),f(t,e,n)},p(t,r){s===(s=n(t))&&o?o.p(t,r):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&p(e)}}}function re(e){let n,s,r,i,c,a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=oe(ee(e,a,t));return{c(){n=d("div"),s=b("svg"),r=b("circle");for(let t=0;t<l.length;t+=1)l[t].c();k(r,"cx",e[7]),k(r,"cy",e[7]),k(r,"r",ie),k(r,"class","svelte-9eu8o1"),k(s,"class","menu svelte-9eu8o1"),k(s,"width",e[6]),k(s,"height",e[6]),k(s,"viewport",`0 0 ${e[6]} ${e[6]}`),$(s,"--position-x",e[1],!1),$(s,"--position-y",e[2],!1),k(n,"class","background svelte-9eu8o1")},m(t,a){f(t,n,a),u(n,s),u(s,r);for(let t=0;t<l.length;t+=1)l[t].m(s,null);e[9](s),i||(c=y(n,"click",(function(){o(e[4])&&e[4].apply(this,arguments)})),i=!0)},p(t,[n]){if(e=t,137&n){let t;for(a=e[0],t=0;t<a.length;t+=1){const o=ee(e,a,t);l[t]?l[t].p(o,n):(l[t]=oe(o),l[t].c(),l[t].m(s,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=a.length}2&n&&$(s,"--position-x",e[1],!1),4&n&&$(s,"--position-y",e[2],!1)},i:t,o:t,d(t){t&&p(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t),e[9](null),i=!1,c()}}}const ie=20,ce=60,ae=3.1415921;function le(t,e,n){let{x:s}=e,{y:o}=e,{name:r}=e,{color:i}=e,{content:c}=e,{cancel:a}=e;const l=2*ce,h=l/2;let u;w((()=>{const t=u.getBoundingClientRect(),e=document.documentElement.clientWidth,s=document.documentElement.clientHeight;t.left+t.width>e&&n(5,u.style.left=e-t.width-4+"px",u),t.top+t.height>s&&n(5,u.style.top=s-t.height-4+"px",u)}));for(let t=0;t<c.length;t++){const e=Math.cos(2*t*ae/c.length),n=Math.sin(2*t*ae/c.length),s=Math.cos(2*(t+1)*ae/c.length),o=Math.sin(2*(t+1)*ae/c.length);c[t].x=e,c[t].y=n,c[t].mx=Math.cos(2*(t+.5)*ae/c.length),c[t].my=Math.sin(2*(t+.5)*ae/c.length),c[t].path=`M ${h+ie*e} ${h+ie*n} L ${h+ce*e} ${h+ce*n} A ${ce} ${ce} 45 0 1 ${h+ce*s} ${h+ce*o} L ${h+ie*s} ${h+ie*o} A ${ie} ${ie} -45 0 0 ${h+ie*e} ${h+ie*n}`}return t.$$set=t=>{"x"in t&&n(1,s=t.x),"y"in t&&n(2,o=t.y),"name"in t&&n(8,r=t.name),"color"in t&&n(3,i=t.color),"content"in t&&n(0,c=t.content),"cancel"in t&&n(4,a=t.cancel)},[c,s,o,i,a,u,l,h,r,function(t){_[t?"unshift":"push"]((()=>{u=t,n(5,u)}))}]}class he extends H{constructor(t){super(),Z(this,t,le,re,r,{x:1,y:2,name:8,color:3,content:0,cancel:4})}}function ue(e){let n,s,o,r;return{c(){n=d("div"),s=d("input"),k(s,"type","text"),s.value=e[0],k(s,"class","svelte-1qivg4w"),k(n,"class","svelte-1qivg4w")},m(t,i){f(t,n,i),u(n,s),e[4](s),o||(r=y(s,"change",e[2]),o=!0)},p(t,[e]){1&e&&s.value!==t[0]&&(s.value=t[0])},i:t,o:t,d(t){t&&p(n),e[4](null),o=!1,r()}}}function fe(t,e,n){let s,{updateText:o}=e,{value:r=""}=e;return w((()=>{s.focus()})),t.$$set=t=>{"updateText"in t&&n(3,o=t.updateText),"value"in t&&n(0,r=t.value)},[r,s,function(t){o(t.target.value)},o,function(t){_[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class pe extends H{constructor(t){super(),Z(this,t,fe,ue,r,{updateText:3,value:0})}}function de(t){let e,n,s,o;return e=new he({props:{x:t[0],y:t[1],content:t[3],name:"Create",color:"red",cancel:t[2]}}),s=new pe({props:{updateText:t[4]}}),{c(){q(e.$$.fragment),n=m(),q(s.$$.fragment)},m(t,r){G(e,t,r),f(t,n,r),G(s,t,r),o=!0},p(t,[n]){const s={};1&n&&(s.x=t[0]),2&n&&(s.y=t[1]),4&n&&(s.cancel=t[2]),e.$set(s)},i(t){o||(R(e.$$.fragment,t),R(s.$$.fragment,t),o=!0)},o(t){Y(e.$$.fragment,t),Y(s.$$.fragment,t),o=!1},d(t){B(e,t),t&&p(n),B(s,t)}}}function be(t,e,n){let{x:s}=e,{y:o}=e,{cancel:r}=e,{makeObject:i}=e;const c=[{type:"option",fun:t=>a(t,"rectangle"),name:"Rectangle",icon:"assets/icons/square-red.svg"},{type:"option",fun:t=>a(t,"ellipse"),name:"Ellipse",icon:"assets/icons/ellipse-red.svg"},{type:"option",fun:t=>a(t,"circle"),name:"Circle",icon:"assets/icons/circle-red.svg"},{type:"option",fun:t=>a(t,"line"),name:"Line",icon:"assets/icons/line-red.svg"},{type:"option",fun:t=>a(t,"arrow"),name:"Arrow",icon:"assets/icons/arrow-right-red.svg"},{type:"option",fun:t=>a(t,"reverse-arrow"),name:"R-Arrow",icon:"assets/icons/arrow-left-red.svg"},{type:"option",fun:t=>a(t,"double-arrow"),name:"D-Arrow",icon:"assets/icons/arrow-double-red.svg"},{type:"option",fun:t=>a(t,"text"),name:"Text",icon:"assets/icons/text-red.svg"}];function a(t,e){t.stopPropagation(),i(e,l)}let l="";return t.$$set=t=>{"x"in t&&n(0,s=t.x),"y"in t&&n(1,o=t.y),"cancel"in t&&n(2,r=t.cancel),"makeObject"in t&&n(5,i=t.makeObject)},[s,o,r,c,function(t){l=t},i]}class ge extends H{constructor(t){super(),Z(this,t,be,de,r,{x:0,y:1,cancel:2,makeObject:5})}}function me(t){let e,n,s,o;return e=new he({props:{content:t[4],color:"blue",x:t[0],y:t[1],cancel:t[3],name:"Edit"}}),s=new pe({props:{updateText:t[5],value:t[2].text}}),{c(){q(e.$$.fragment),n=m(),q(s.$$.fragment)},m(t,r){G(e,t,r),f(t,n,r),G(s,t,r),o=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),8&n&&(o.cancel=t[3]),e.$set(o);const r={};4&n&&(r.value=t[2].text),s.$set(r)},i(t){o||(R(e.$$.fragment,t),R(s.$$.fragment,t),o=!0)},o(t){Y(e.$$.fragment,t),Y(s.$$.fragment,t),o=!1},d(t){B(e,t),t&&p(n),B(s,t)}}}function xe(t,e,n){let{x:s}=e,{y:o}=e,{obj:r}=e,{moveObject:i}=e,{deleteObject:c}=e,{resizeObject:a}=e,{cloneObject:l}=e,{selectNextObject:h}=e,{cancel:u}=e,{updateText:f}=e,{menuChange:p}=e,d=[{name:"Move",type:"option",icon:"assets/icons/move.svg",fun:function(t){t.stopPropagation(),i(r,t.clientX,t.clientY)}},{name:"Resize",type:"option",icon:"assets/icons/resize.svg",fun:function(t){t.stopPropagation(),a(r,t.clientX,t.clientY)}},{name:"Delete",type:"option",icon:"assets/icons/delete.svg",fun:function(t){t.stopPropagation(),c(r,t.clientX,t.clientY)}},{name:"Change",type:"option",icon:"assets/icons/change.svg",fun:function(t){t.stopPropagation(),p()}},{name:"Clone",type:"option",icon:"assets/icons/clone.svg",fun:function(t){t.stopPropagation(),l(r,t.clientX,t.ClientY)}},{name:"Next",type:"option",icon:"assets/icons/select-down.svg",fun:function(t){t.stopPropagation(),h(r,t.clientX,t.ClientY)}}];return t.$$set=t=>{"x"in t&&n(0,s=t.x),"y"in t&&n(1,o=t.y),"obj"in t&&n(2,r=t.obj),"moveObject"in t&&n(6,i=t.moveObject),"deleteObject"in t&&n(7,c=t.deleteObject),"resizeObject"in t&&n(8,a=t.resizeObject),"cloneObject"in t&&n(9,l=t.cloneObject),"selectNextObject"in t&&n(10,h=t.selectNextObject),"cancel"in t&&n(3,u=t.cancel),"updateText"in t&&n(11,f=t.updateText),"menuChange"in t&&n(12,p=t.menuChange)},[s,o,r,u,d,function(t){f(r,t)},i,c,a,l,h,f,p]}class ye extends H{constructor(t){super(),Z(this,t,xe,me,r,{x:0,y:1,obj:2,moveObject:6,deleteObject:7,resizeObject:8,cloneObject:9,selectNextObject:10,cancel:3,updateText:11,menuChange:12})}}function ke(t){let e,n,s,o;return e=new he({props:{content:t[4],color:"blue",x:t[1],y:t[2],cancel:t[3],name:"Change"}}),s=new pe({props:{updateText:t[5],value:t[0].text}}),{c(){q(e.$$.fragment),n=m(),q(s.$$.fragment)},m(t,r){G(e,t,r),f(t,n,r),G(s,t,r),o=!0},p(t,[n]){const o={};2&n&&(o.x=t[1]),4&n&&(o.y=t[2]),8&n&&(o.cancel=t[3]),e.$set(o);const r={};1&n&&(r.value=t[0].text),s.$set(r)},i(t){o||(R(e.$$.fragment,t),R(s.$$.fragment,t),o=!0)},o(t){Y(e.$$.fragment,t),Y(s.$$.fragment,t),o=!1},d(t){B(e,t),t&&p(n),B(s,t)}}}function Me(t,e,n){let{x:s}=e,{y:o}=e,{obj:r}=e,{updateObject:i}=e,{updateText:c}=e,{cancel:a}=e,l=[{type:"option",name:"Rectangle",icon:"assets/icons/square-blue.svg",fun:t=>h(t,"rectangle")},{type:"option",name:"Ellipse",icon:"assets/icons/ellipse-blue.svg",fun:t=>h(t,"ellipse")},{type:"option",name:"Circle",icon:"assets/icons/circle-blue.svg",fun:t=>h(t,"circle")},{type:"option",name:"Line",icon:"assets/icons/line-blue.svg",fun:t=>h(t,"line")},{type:"option",name:"Arrow",icon:"assets/icons/arrow-right-blue.svg",fun:t=>h(t,"arrow")},{type:"option",name:"R-Arrow",icon:"assets/icons/arrow-left-blue.svg",fun:t=>h(t,"reverse-arrow")},{type:"option",name:"D-Arrow",icon:"assets/icons/arrow-double-blue.svg",fun:t=>h(t,"double-arrow")},{type:"option",name:"Text",icon:"assets/icons/text-blue.svg",fun:t=>h(t,"text")}];function h(t,e){t.stopPropagation(),n(0,r.type=e,r),n(0,r.edited=!0,r),i(r)}return t.$$set=t=>{"x"in t&&n(1,s=t.x),"y"in t&&n(2,o=t.y),"obj"in t&&n(0,r=t.obj),"updateObject"in t&&n(6,i=t.updateObject),"updateText"in t&&n(7,c=t.updateText),"cancel"in t&&n(3,a=t.cancel)},[r,s,o,a,l,function(t){c(r,t)},i,c]}class $e extends H{constructor(t){super(),Z(this,t,Me,ke,r,{x:1,y:2,obj:0,updateObject:6,updateText:7,cancel:3})}}function ve(e){let n,s,r,i;return{c(){n=b("g")},m(t,o){f(t,n,o),r||(i=h(s=e[1].call(null,n,e[0])),r=!0)},p(t,[e]){s&&o(s.update)&&1&e&&s.update.call(null,t[0])},i:t,o:t,d(t){t&&p(n),r=!1,i()}}}const we="http://www.w3.org/2000/svg";function Ae(t,e,n){const s=t[0]-e[0],o=t[1]-e[1],r=Math.cos(n)*s-Math.sin(n)*o,i=Math.sin(n)*s+Math.cos(n)*o;return[r+e[0],i+e[1]]}function _e(t,e,n){let{roughSvg:s}=e,{obj:o}=e,r=null;function i(t,e,n){const o=t[0],r=t[1],i=e[0],c=e[1],a=Math.abs(o-i),l=Math.abs(r-c),h=function(t,e,n){const s=t[0]-e[0],o=t[1]-e[1],r=Math.atan2(o,s),i=Math.cos(r)*n,c=Math.sin(r)*n;return[t[0]-i,t[1]-c]}(t,e,Math.min(Math.sqrt(a*a+l*l)/2,20)),u=Ae(h,t,Math.PI/6),f=Ae(h,t,-Math.PI/6),p=s.line(o,r,u[0],u[1],{strokeWidth:2}),d=s.line(o,r,f[0],f[1],{strokeWidth:2});n.appendChild(p),n.appendChild(d)}function c(t,e){const n=Math.abs(t.box[2]-t.box[0]),o=Math.abs(t.box[3]-t.box[1]),r=Math.min(t.box[0],t.box[2]),c=Math.min(t.box[1],t.box[3]);switch(t.type){case"rectangle":const a=s.rectangle(r,c,n,o,{strokeWidth:2});e.appendChild(a);break;case"circle":const l=s.circle((t.box[2]+t.box[0])/2,(t.box[3]+t.box[1])/2,Math.min(o,n),{strokeWidth:2});e.appendChild(l);break;case"ellipse":const h=s.ellipse((t.box[2]+t.box[0])/2,(t.box[3]+t.box[1])/2,n,o,{strokeWidth:2});e.appendChild(h);break;case"line":const u=s.line(t.box[0],t.box[1],t.box[2],t.box[3],{strokeWidth:2});e.appendChild(u);break;case"arrow":const f=s.line(t.box[0],t.box[1],t.box[2],t.box[3],{strokeWidth:2});e.appendChild(f),i([t.box[2],t.box[3]],[t.box[0],t.box[1]],e);break;case"reverse-arrow":const p=s.line(t.box[0],t.box[1],t.box[2],t.box[3],{strokeWidth:2});e.appendChild(p),i([t.box[0],t.box[1]],[t.box[2],t.box[3]],e);break;case"double-arrow":const d=s.line(t.box[0],t.box[1],t.box[2],t.box[3],{strokeWidth:2});e.appendChild(d),i([t.box[2],t.box[3]],[t.box[0],t.box[1]],e),i([t.box[0],t.box[1]],[t.box[2],t.box[3]],e)}!function(t,e,n){const s=document.createElementNS(we,"text");s.setAttribute("x",t[0]),s.setAttribute("y",t[1]),s.setAttribute("dy","0.35em"),s.setAttribute("text-anchor","middle"),s.setAttribute("font-size","36px"),s.setAttribute("stroke-width","10px"),s.setAttribute("stroke","white"),s.textContent=e,n.appendChild(s);const o=document.createElementNS(we,"text");o.setAttribute("x",t[0]),o.setAttribute("y",t[1]),o.setAttribute("dy","0.35em"),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size","36px"),o.textContent=e,n.appendChild(o)}([(t.box[0]+t.box[2])/2,(t.box[1]+t.box[3])/2],t.text,e)}return w((()=>{o.edited?(delete o.edited,function(){if(r)for(;r.firstChild;)r.removeChild(r.firstChild)}(),c(o,r)):o.editedText&&r.querySelectorAll("text").forEach((t=>{t.textContent=o.text}))})),t.$$set=t=>{"roughSvg"in t&&n(2,s=t.roughSvg),"obj"in t&&n(0,o=t.obj)},[o,function(t,e){return r=t,c(e,t),{destroy(){t.remove()}}},s]}class Oe extends H{constructor(t){super(),Z(this,t,_e,ve,r,{roughSvg:2,obj:0})}}const je="http://www.w3.org/2000/svg";class Se{constructor(t,e,n){this._drawer=document.createElementNS(je,"g"),t.appendChild(this._drawer),this._startX=e,this._startY=n,this._endX=e,this._endY=n;const s=document.createElementNS(je,"rect");this._drawer.appendChild(s),s.setAttribute("id","rect"),s.setAttribute("x",this._startX),s.setAttribute("y",this._startY),s.setAttribute("width",0),s.setAttribute("height",0),s.setAttribute("stroke","#ff3e00"),s.setAttribute("stroke-dasharray","5 10"),s.setAttribute("fill","none");const o=document.createElementNS(je,"line");this._drawer.appendChild(o),o.setAttribute("id","line1"),o.setAttribute("x1",this._startX),o.setAttribute("y1",this._startY),o.setAttribute("x2",this._startX),o.setAttribute("y2",this._startY),o.setAttribute("stroke","#ff3e00"),o.setAttribute("stroke-dasharray","5 10"),o.setAttribute("fill","none");const r=document.createElementNS(je,"line");this._drawer.appendChild(r),r.setAttribute("id","line2"),r.setAttribute("x1",this._startX),r.setAttribute("y1",this._startY),r.setAttribute("x2",this._startX),r.setAttribute("y2",this._startY),r.setAttribute("stroke","#ff3e00"),r.setAttribute("stroke-dasharray","5 10"),r.setAttribute("fill","none");const i=document.createElementNS(je,"line");this._drawer.appendChild(i),i.setAttribute("id","line3"),i.setAttribute("x1",this._startX),i.setAttribute("y1",this._startY),i.setAttribute("x2",this._startX),i.setAttribute("y2",this._startY),i.setAttribute("stroke","#ff3e00"),i.setAttribute("stroke-dasharray","5 10"),i.setAttribute("fill","none");const c=document.createElementNS(je,"text");this._drawer.appendChild(c),c.setAttribute("id","text"),c.setAttribute("x",this._startX),c.setAttribute("y",this._startY),c.setAttribute("dy","0.35em"),c.setAttribute("text-anchor","middle"),c.setAttribute("font-size","36px"),c.setAttribute("stroke","#ff3e00"),c.setAttribute("opacity","0.5")}box(){return[this._startX,this._startY,this._endX,this._endY]}resize(t,e){this.move(this._startX,this._startY,t,e)}move(t,e,n,s){this._startX=t,this._startY=e,this._endX=n,this._endY=s;const o=Math.min(t,n),r=Math.min(e,s),i=Math.abs(n-t),c=Math.abs(s-e),a=document.getElementById("rect");a.setAttribute("x",o),a.setAttribute("y",r),a.setAttribute("width",i),a.setAttribute("height",c);const l=document.getElementById("line1"),h=document.getElementById("line2"),u=document.getElementById("line3");if(i<c){const t=(c-i)/2;l.setAttribute("x1",o),l.setAttribute("y1",r+t),l.setAttribute("x2",o+i),l.setAttribute("y2",r+t),h.setAttribute("x1",o),h.setAttribute("y1",r+t+i),h.setAttribute("x2",o+i),h.setAttribute("y2",r+t+i)}else if(i>c){const t=(i-c)/2;l.setAttribute("x1",o+t),l.setAttribute("y1",r),l.setAttribute("x2",o+t),l.setAttribute("y2",r+c),h.setAttribute("x1",o+t+c),h.setAttribute("y1",r),h.setAttribute("x2",o+t+c),h.setAttribute("y2",r+c)}u.setAttribute("x1",t),u.setAttribute("y1",e),u.setAttribute("x2",n),u.setAttribute("y2",s);const f=document.getElementById("text");f.setAttribute("x",(t+n)/2),f.setAttribute("y",(e+s)/2)}updateText(t){document.getElementById("text").textContent=t}remove(){for(;this._drawer.firstChild;)this._drawer.firstChild.remove();this._drawer.remove()}}function Pe(t,e,n){const s=Math.min(n.box[0],n.box[2]),o=Math.max(n.box[0],n.box[2]),r=Math.min(n.box[1],n.box[3]),i=Math.max(n.box[1],n.box[3]);return t>=s&&t<=o&&e>=r&&e<=i}function Ce(t,e,n,s){for(let o=(s||t.length)-1;o>=0;o--)if(Pe(e,n,t[o]))return[t[o],o];return null!=s?Ce(t,e,n):[null,0]}class Te{constructor(t){this._node=t,this._hover=null,this._object=null,this._index=null,this._px=0,this._py=0}isSelected(){return!!this._object}select(t,e,n){this._px=e,this._py=n;const[s,o]=Ce(t,e,n);this._index=o,this.selectObject(s)}next(t){if(!this.isSelected())return!1;this.clear();const[e,n]=Ce(t,this._px,this._py,this._index);return this._index=n,this.selectObject(e),!!this.isSelected()&&[this._px,this._py]}selectObject(t){this._object?t?this._object.id!==t.id&&(this.clear(),this._select(t)):this.clear():t&&this._select(t)}_select(t){this._object=t,this._hover=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._node.appendChild(this._hover);const e=t.box,n=Math.min(e[0],e[2]),s=Math.max(e[0],e[2]),o=Math.min(e[1],e[3]),r=Math.max(e[1],e[3]);this._hover.setAttribute("x",n-5),this._hover.setAttribute("y",o-5),this._hover.setAttribute("width",s-n+10),this._hover.setAttribute("height",r-o+10),this._hover.setAttribute("stroke","#003eff"),this._hover.setAttribute("stroke-dasharray","5 10"),this._hover.setAttribute("fill","none")}object(){return this._object}clear(){this.isSelected()&&(this._hover.remove(),this._hover=null,this._object=null)}}function Ee(t,e,n){const s=t.slice();return s[35]=e[n],s}function Le(t,e){let n,s,o;return s=new Oe({props:{obj:e[35],roughSvg:e[1]}}),{key:t,first:null,c(){n=x(),q(s.$$.fragment),this.first=n},m(t,e){f(t,n,e),G(s,t,e),o=!0},p(t,n){e=t;const o={};1&n[0]&&(o.obj=e[35]),2&n[0]&&(o.roughSvg=e[1]),s.$set(o)},i(t){o||(R(s.$$.fragment,t),o=!0)},o(t){Y(s.$$.fragment,t),o=!1},d(t){t&&p(n),B(s,t)}}}function De(t){let e,n;return e=new ge({props:{x:t[2][0],y:t[2][1],cancel:t[7],makeObject:t[8]}}),{c(){q(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};4&n[0]&&(s.x=t[2][0]),4&n[0]&&(s.y=t[2][1]),e.$set(s)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ze(t){let e,n;return e=new ye({props:{x:t[3][0],y:t[3][1],obj:t[3][2],moveObject:t[10],deleteObject:t[14],resizeObject:t[11],cloneObject:t[12],selectNextObject:t[13],updateText:t[5],menuChange:t[15],cancel:t[7]}}),{c(){q(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};8&n[0]&&(s.x=t[3][0]),8&n[0]&&(s.y=t[3][1]),8&n[0]&&(s.obj=t[3][2]),e.$set(s)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ie(t){let e,n;return e=new $e({props:{x:t[4][0],y:t[4][1],obj:t[4][2],updateObject:t[9],cancel:t[7],updateText:t[5]}}),{c(){q(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};16&n[0]&&(s.x=t[4][0]),16&n[0]&&(s.y=t[4][1]),16&n[0]&&(s.obj=t[4][2]),e.$set(s)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function We(t){let e,n,o,r,i,c,a,l,u=[],d=new Map,g=t[0];const M=t=>t[35].id;for(let e=0;e<g.length;e+=1){let n=Ee(t,g,e),s=M(n);d.set(s,u[e]=Le(s,n))}let $=t[2]&&De(t),v=t[3]&&ze(t),w=t[4]&&Ie(t);return{c(){e=b("svg");for(let t=0;t<u.length;t+=1)u[t].c();n=m(),$&&$.c(),o=m(),v&&v.c(),r=m(),w&&w.c(),i=x(),k(e,"class","svelte-17qhax3")},m(s,p){f(s,e,p);for(let t=0;t<u.length;t+=1)u[t].m(e,null);f(s,n,p),$&&$.m(s,p),f(s,o,p),v&&v.m(s,p),f(s,r,p),w&&w.m(s,p),f(s,i,p),c=!0,a||(l=[y(e,"mousedown",t[6]),y(e,"mouseup",t[16]),y(e,"mousemove",t[17]),y(e,"contextmenu",Ne),h(t[18].call(null,e))],a=!0)},p(t,n){3&n[0]&&(g=t[0],W(),u=function(t,e,n,s,o,r,i,c,a,l,h,u){let f=t.length,p=r.length,d=f;const b={};for(;d--;)b[t[d].key]=d;const g=[],m=new Map,x=new Map;for(d=p;d--;){const t=u(o,r,d),c=n(t);let a=i.get(c);a?s&&a.p(t,e):(a=l(c,t),a.c()),m.set(c,g[d]=a),c in b&&x.set(c,Math.abs(d-b[c]))}const y=new Set,k=new Set;function M(t){R(t,1),t.m(c,h),i.set(t.key,t),h=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],s=e.key,o=n.key;e===n?(h=e.first,f--,p--):m.has(o)?!i.has(s)||y.has(s)?M(e):k.has(o)?f--:x.get(s)>x.get(o)?(k.add(s),M(e)):(y.add(o),f--):(a(n,i),f--)}for(;f--;){const e=t[f];m.has(e.key)||a(e,i)}for(;p;)M(g[p-1]);return g}(u,n,M,1,t,g,d,e,F,Le,null,Ee),N()),t[2]?$?($.p(t,n),4&n[0]&&R($,1)):($=De(t),$.c(),R($,1),$.m(o.parentNode,o)):$&&(W(),Y($,1,1,(()=>{$=null})),N()),t[3]?v?(v.p(t,n),8&n[0]&&R(v,1)):(v=ze(t),v.c(),R(v,1),v.m(r.parentNode,r)):v&&(W(),Y(v,1,1,(()=>{v=null})),N()),t[4]?w?(w.p(t,n),16&n[0]&&R(w,1)):(w=Ie(t),w.c(),R(w,1),w.m(i.parentNode,i)):w&&(W(),Y(w,1,1,(()=>{w=null})),N())},i(t){if(!c){for(let t=0;t<g.length;t+=1)R(u[t]);R($),R(v),R(w),c=!0}},o(t){for(let t=0;t<u.length;t+=1)Y(u[t]);Y($),Y(v),Y(w),c=!1},d(t){t&&p(e);for(let t=0;t<u.length;t+=1)u[t].d();t&&p(n),$&&$.d(t),t&&p(o),v&&v.d(t),t&&p(r),w&&w.d(t),t&&p(i),a=!1,s(l)}}}function Ne(t){t.preventDefault()}function Re(t,e,n){let s,o,r,i,c,a,l,h,u,f,p,d,{objects:b}=e,{addObject:g}=e,{deleteObject:m}=e,x=null,y=!1,k=!1;function M(){x&&(x.remove(),x=null)}return t.$$set=t=>{"objects"in t&&n(0,b=t.objects),"addObject"in t&&n(19,g=t.addObject),"deleteObject"in t&&n(20,m=t.deleteObject)},[b,s,f,p,d,function(t,e){t.text=e,t.editedText=!0,g()},function(t){0==t.button&&(f||p||d||y||k||(a=t.clientX-r,l=t.clientY-i,x=new Se(o,a,l)))},function(){M(),n(2,f=!1),n(3,p=!1),n(4,d=!1)},function(t,e){M();const s={id:Zt(),type:t,box:[a,l,h,u],text:e};g(s),n(2,f=!1)},function(t){g(),n(4,d=!1)},function(t,e,s){const c=new Se(o,t.box[0],t.box[1]);c.resize(t.box[2],t.box[3]),a=e-r,l=s-i,y=[t,c],n(3,p=!1)},function(t,e,s){const c=new Se(o,t.box[0],t.box[1]);a=t.box[0],l=t.box[1],h=e-r,u=s-i,c.resize(h,u),k=[t,c],n(3,p=!1)},function(t,e,s){const o={id:Zt(),type:t.type,box:[t.box[0]+24,t.box[1]+24,t.box[2]+24,t.box[3]+24],text:t.text};g(o),c.clear();const a=e-r,l=s-i;c.select(b,a,l),n(3,p=!1)},function(t,e,s){const o=c.next(b);n(3,p=!!o&&[o[0],o[1],c.object()])},function(t,e,s){m(t),c.clear();const o=e-r,a=s-i;c.select(b,o,a),n(3,p=!1)},function(){n(4,d=p),n(3,p=!1)},function(t){if(!(f||p||d))if(h=t.clientX-r,u=t.clientY-i,0==t.button){if(x)Math.abs(a-h)>4||Math.abs(l-u)>4?n(2,f=[h,u]):(M(),c.isSelected()&&n(3,p=[h,u,c.object()]));else if(y){const[t,e]=y;e.remove(),y=!1,t.box=e.box(),t.edited=!0,g(),c.clear(),c.select(b,h,u)}else if(k){const[t,e]=k;e.remove(),k=!1,t.box=e.box(),t.edited=!0,g(),c.clear(),c.select(b,h,u)}}else 2==t.button&&(x||c.isSelected()&&console.log("selected = ",c.object()))},function(t){if(f||p||d)return;const e=t.clientX-r,n=t.clientY-i;if(x)x.resize(e,n);else if(y){const t=e-a,s=n-l,[o,r]=y;r.move(o.box[0]+t,o.box[1]+s,o.box[2]+t,o.box[3]+s)}else if(k){const[t,s]=k;s.resize(e,n)}c.select(b,e,n)},function(t){o=t;const e=t.getBoundingClientRect();r=e.left,i=e.top,n(1,s=Vt.svg(t)),c=new Te(t)},g,m]}class Ye extends H{constructor(t){super(),Z(this,t,Re,We,r,{objects:0,addObject:19,deleteObject:20},null,[-1,-1])}}function Xe(t){let e,n,r,i,c,a,h,b;const x=t[4].default,v=function(t,e,n,s){if(t){const o=l(t,e,n,s);return t[0](o)}}(x,t,t[3],null);return{c(){e=d("div"),n=d("div"),r=d("div"),i=g(t[0]),c=m(),v&&v.c(),k(r,"class","title svelte-f83c1r"),$(r,"--color",t[1],!1),k(n,"class","frame svelte-f83c1r"),k(e,"class","background svelte-f83c1r")},m(s,l){var p;f(s,e,l),u(e,n),u(n,r),u(r,i),u(n,c),v&&v.m(n,null),a=!0,h||(b=[y(n,"click",(p=Fe,function(t){return t.stopPropagation(),p.call(this,t)})),y(e,"click",(function(){o(t[2])&&t[2].apply(this,arguments)}))],h=!0)},p(e,[n]){t=e,(!a||1&n)&&M(i,t[0]),2&n&&$(r,"--color",t[1],!1),v&&v.p&&(!a||8&n)&&function(t,e,n,s,o,r){if(o){const i=l(e,n,s,r);t.p(i,o)}}(v,x,t,t[3],a?function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}(x,t[3],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){a||(R(v,t),a=!0)},o(t){Y(v,t),a=!1},d(t){t&&p(e),v&&v.d(t),h=!1,s(b)}}}const Fe=()=>{};function qe(t,e,n){let{$$slots:s={},$$scope:o}=e,{name:r}=e,{color:i}=e,{cancel:c}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name),"color"in t&&n(1,i=t.color),"cancel"in t&&n(2,c=t.cancel),"$$scope"in t&&n(3,o=t.$$scope)},[r,i,c,o,s]}class Ge extends H{constructor(t){super(),Z(this,t,qe,Xe,r,{name:0,color:1,cancel:2})}}const{document:Be}=X;function Ve(t){let e,n;return e=new Ge({props:{name:"Upload Diagram",color:"blue",cancel:t[11],$$slots:{default:[Ue]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};4&n&&(s.cancel=t[11]),16390&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ze(t){let e;return{c(){e=d("div"),e.textContent="There is a problem with the JSON file.",k(e,"class","error svelte-4rtuvd")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function He(e){let n;return{c(){n=d("button"),n.textContent="Upload",n.disabled=!0,k(n,"class","svelte-4rtuvd")},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Qe(e){let n,s,o;return{c(){n=d("button"),n.textContent="Upload",k(n,"class","svelte-4rtuvd")},m(t,r){f(t,n,r),s||(o=y(n,"click",e[8]),s=!0)},p:t,d(t){t&&p(n),s=!1,o()}}}function Ue(t){let e,n,s,o,r,i,c,a,l,h=t[2]===Ke&&Ze();function b(t,e){return t[1]?Qe:He}let g=b(t),x=g(t);return{c(){e=d("div"),n=d("div"),n.textContent="Choose a diagram to upload:",s=m(),o=d("input"),r=m(),h&&h.c(),i=m(),c=d("div"),x.c(),k(n,"class","svelte-4rtuvd"),k(o,"type","file"),k(o,"class","svelte-4rtuvd"),k(c,"class","svelte-4rtuvd"),k(e,"class","content svelte-4rtuvd")},m(p,d){f(p,e,d),u(e,n),u(e,s),u(e,o),u(e,r),h&&h.m(e,null),u(e,i),u(e,c),x.m(c,null),a||(l=y(o,"change",t[10]),a=!0)},p(t,n){t[2]===Ke?h||(h=Ze(),h.c(),h.m(e,i)):h&&(h.d(1),h=null),g===(g=b(t))&&x?x.p(t,n):(x.d(1),x=g(t),x&&(x.c(),x.m(c,null)))},d(t){t&&p(e),h&&h.d(),x.d(),a=!1,l()}}}function Je(t){let e,n,s,o,r,i,c,a,l,h,b,g,y,M,$,v,w,A,_,O,j;h=new te({props:{src:"assets/icons/clear.svg",width:"1.5em",clickFn:t[3]&&t[4]}}),g=new te({props:{src:"assets/icons/upload.svg",width:"1.5em",clickFn:!t[3]&&t[7]}}),M=new te({props:{src:"assets/icons/download.svg",width:"1.5em",clickFn:t[3]&&t[9]}}),v=new te({props:{src:"assets/icons/github.svg",width:"1.5em",href:"https://github.com/rpucella/Rough-Sketch"}}),A=new Ye({props:{objects:t[0],addObject:t[5],deleteObject:t[6]}});let S=t[2]>0&&Ve(t);return{c(){e=d("link"),n=d("link"),s=d("link"),o=d("style"),o.textContent="body {\n      padding: 8px;\n      user-select: none;\n    }\n    \n    svg text {\n      font-family: Nothing You Could Do;\n      font-display: block;\n    }",r=m(),i=d("main"),c=d("div"),c.textContent="Rough Sketch",a=m(),l=d("div"),q(h.$$.fragment),b=m(),q(g.$$.fragment),y=m(),q(M.$$.fragment),$=m(),q(v.$$.fragment),w=m(),q(A.$$.fragment),_=m(),S&&S.c(),O=x(),Be.title="Rough Sketch",k(e,"rel","preconnect"),k(e,"href","https://fonts.googleapis.com"),k(n,"rel","preconnect"),k(n,"href","https://fonts.gstatic.com"),k(n,"crossorigin",""),k(s,"href","https://fonts.googleapis.com/css2?family=Nothing+You+Could+Do"),k(s,"rel","stylesheet"),k(c,"class","title svelte-4rtuvd"),k(l,"class","icons svelte-4rtuvd")},m(t,p){u(Be.head,e),u(Be.head,n),u(Be.head,s),u(Be.head,o),f(t,r,p),f(t,i,p),u(i,c),u(i,a),u(i,l),G(h,l,null),u(l,b),G(g,l,null),u(l,y),G(M,l,null),u(l,$),G(v,l,null),u(i,w),G(A,i,null),f(t,_,p),S&&S.m(t,p),f(t,O,p),j=!0},p(t,[e]){const n={};8&e&&(n.clickFn=t[3]&&t[4]),h.$set(n);const s={};8&e&&(s.clickFn=!t[3]&&t[7]),g.$set(s);const o={};8&e&&(o.clickFn=t[3]&&t[9]),M.$set(o);const r={};1&e&&(r.objects=t[0]),A.$set(r),t[2]>0?S?(S.p(t,e),4&e&&R(S,1)):(S=Ve(t),S.c(),R(S,1),S.m(O.parentNode,O)):S&&(W(),Y(S,1,1,(()=>{S=null})),N())},i(t){j||(R(h.$$.fragment,t),R(g.$$.fragment,t),R(M.$$.fragment,t),R(v.$$.fragment,t),R(A.$$.fragment,t),R(S),j=!0)},o(t){Y(h.$$.fragment,t),Y(g.$$.fragment,t),Y(M.$$.fragment,t),Y(v.$$.fragment,t),Y(A.$$.fragment,t),Y(S),j=!1},d(t){p(e),p(n),p(s),p(o),t&&p(r),t&&p(i),B(h),B(g),B(M),B(v),B(A),t&&p(_),S&&S.d(t),t&&p(O)}}}const Ke=2;function tn(t,e,n){let s,o,r=[],i=400,c=400,a=0;return t.$$.update=()=>{1&t.$$.dirty&&n(3,s=r&&r.length>0)},[r,o,a,s,function(){n(0,r=[])},function(t){t&&r.push(t),n(0,r)},function(t){if(t)for(let e=0;e<r.length;e++)t.id===r[e].id&&r.splice(e,1);n(0,r)},function(){n(2,a=1)},function(){o&&o[0].text().then((t=>{const e=JSON.parse(t);i=e.height,c=e.width,n(0,r=e.objects),n(2,a=0)})).catch((t=>{n(2,a=Ke)}))},function(){const t={height:i,width:c,objects:r},e=new Blob([JSON.stringify(t,null,2)],{type:"text/json"}),n=document.createElement("a");n.download="diagram.json",n.href=window.URL.createObjectURL(e),n.dataset.downloadurl=["text/json",n.download,n.href].join(":");const s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n.dispatchEvent(s),n.remove()},function(){o=this.files,n(1,o)},()=>{n(2,a=0)}]}return new class extends H{constructor(t){super(),Z(this,t,tn,Je,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
